<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.dozone.wehagopro.repository.mybatis.UserMapper">
    <select id="findByUserId" parameterType="String" resultType="com.dozone.wehagopro.domain.UserDto">
        select * from t_user where t_user_id = #{userId};
    </select>
    <select id="getUserCompanyList" parameterType="String" resultType="com.dozone.wehagopro.domain.UserCompanyDto">
        SELECT
        c.t_company_name,
        e.t_employee_auth,
        e.t_employee_duty
        FROM
        t_user u
        JOIN
        t_employee e ON u.t_user_no = e.t_user_no
        JOIN
        t_company c ON e.t_company_no = c.t_company_no
        WHERE
        u.t_user_id = #{userId};
    </select>
    <select id="getUserServiceList" parameterType="String" resultType="com.dozone.wehagopro.domain.UserServiceDto">
        SELECT
        t_service.t_service_name,
        t_service.t_service_menu_icon_path
        FROM
        t_user
        JOIN
        t_employee ON t_user.t_user_no = t_employee.t_user_no
        JOIN
        t_service_published ON t_employee.t_employee_no = t_service_published.t_employee_no
        JOIN
        t_service ON t_service_published.t_service_no = t_service.t_service_no
        WHERE
        t_user.t_user_id = #{userId};
    </select>
</mapper>